!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e,i,o,s,r,a,n,l,h,c,p,d,x,y,f,z,u,b,g,v,m,M;i=(e=t).deg2rad,o=e.pick,e.perspective3D=function(t,e,i){return e=0<i&&i<Number.POSITIVE_INFINITY?i/(t.z+e.z+i):1,{x:t.x*e,y:t.y*e}},e.perspective=function(t,s,r){var a=s.options.chart.options3d,n=!!r&&s.inverted,l={x:s.plotWidth/2,y:s.plotHeight/2,z:a.depth/2,vd:o(a.depth,1)*o(a.viewDistance,0)},h=s.scale3d||1,c=i*a.beta*(n?-1:1),p=(a=i*a.alpha*(n?-1:1),Math.cos(a)),d=Math.cos(-c),x=Math.sin(a),y=Math.sin(-c);return r||(l.x+=s.plotLeft,l.y+=s.plotTop),e.map(t,function(t){var i;i=(n?t.y:t.x)-l.x;var o=(n?t.x:t.y)-l.y;return t=(t.z||0)-l.z,i={x:d*i-y*t,y:-x*y*i+p*o-d*x*t,z:p*y*i+x*o+p*d*t},(o=e.perspective3D(i,l,l.vd)).x=o.x*h+l.x,o.y=o.y*h+l.y,o.z=i.z*h+l.z,{x:n?o.y:o.x,y:n?o.x:o.y,z:o.z}})},e.pointCameraDistance=function(t,e){var i=e.options.chart.options3d,s=e.plotWidth/2;return e=e.plotHeight/2,i=o(i.depth,1)*o(i.viewDistance,0)+i.depth,Math.sqrt(Math.pow(s-t.plotX,2)+Math.pow(e-t.plotY,2)+Math.pow(i-t.plotZ,2))},e.shapeArea=function(t){var e,i,o=0;for(e=0;e<t.length;e++)i=(e+1)%t.length,o+=t[e].x*t[i].y-t[i].x*t[e].y;return o/2},e.shapeArea3d=function(t,i,o){return e.shapeArea(e.perspective(t,i,o))},function(t){function e(t,i,o,s,r,a,n,l){var h=[],c=a-r;return a>r&&a-r>Math.PI/2+1e-4?h=(h=h.concat(e(t,i,o,s,r,r+Math.PI/2,n,l))).concat(e(t,i,o,s,r+Math.PI/2,a,n,l)):a<r&&r-a>Math.PI/2+1e-4?h=(h=h.concat(e(t,i,o,s,r,r-Math.PI/2,n,l))).concat(e(t,i,o,s,r-Math.PI/2,a,n,l)):["C",t+o*Math.cos(r)-o*v*c*Math.sin(r)+n,i+s*Math.sin(r)+s*v*c*Math.cos(r)+l,t+o*Math.cos(a)+o*v*c*Math.sin(a)+n,i+s*Math.sin(a)-s*v*c*Math.cos(a)+l,t+o*Math.cos(a)+n,i+s*Math.sin(a)+l]}var i=Math.cos,o=Math.PI,s=Math.sin,r=t.animObject,a=t.charts,n=t.color,l=t.defined,h=t.deg2rad,c=t.each,p=t.extend,d=t.inArray,x=t.map,y=t.merge,f=t.perspective,z=t.pick,u=t.SVGElement,b=t.SVGRenderer,g=t.wrap,v=4*(Math.sqrt(2)-1)/3/(o/2);b.prototype.toLinePath=function(t,e){var i=[];return c(t,function(t){i.push("L",t.x,t.y)}),t.length&&(i[0]="M",e&&i.push("Z")),i},b.prototype.toLineSegments=function(t){var e=[],i=!0;return c(t,function(t){e.push(i?"M":"L",t.x,t.y),i=!i}),e},b.prototype.face3d=function(e){var i=this,o=this.createElement("path");return o.vertexes=[],o.insidePlotArea=!1,o.enabled=!0,g(o,"attr",function(e,o){if("object"==typeof o&&(l(o.enabled)||l(o.vertexes)||l(o.insidePlotArea))){this.enabled=z(o.enabled,this.enabled),this.vertexes=z(o.vertexes,this.vertexes),this.insidePlotArea=z(o.insidePlotArea,this.insidePlotArea),delete o.enabled,delete o.vertexes,delete o.insidePlotArea;var s=f(this.vertexes,a[i.chartIndex],this.insidePlotArea),r=i.toLinePath(s,!0);s=t.shapeArea(s),s=this.enabled&&0<s?"visible":"hidden";o.d=r,o.visibility=s}return e.apply(this,[].slice.call(arguments,1))}),g(o,"animate",function(e,o){if("object"==typeof o&&(l(o.enabled)||l(o.vertexes)||l(o.insidePlotArea))){this.enabled=z(o.enabled,this.enabled),this.vertexes=z(o.vertexes,this.vertexes),this.insidePlotArea=z(o.insidePlotArea,this.insidePlotArea),delete o.enabled,delete o.vertexes,delete o.insidePlotArea;var s=f(this.vertexes,a[i.chartIndex],this.insidePlotArea),r=i.toLinePath(s,!0);s=t.shapeArea(s),s=this.enabled&&0<s?"visible":"hidden";o.d=r,this.attr("visibility",s)}return e.apply(this,[].slice.call(arguments,1))}),o.attr(e)},b.prototype.polyhedron=function(t){var e=this,i=this.g(),o=i.destroy;return i.attr({"stroke-linejoin":"round"}),i.faces=[],i.destroy=function(){for(var t=0;t<i.faces.length;t++)i.faces[t].destroy();return o.call(this)},g(i,"attr",function(t,o,s,r,a){if("object"==typeof o&&l(o.faces)){for(;i.faces.length>o.faces.length;)i.faces.pop().destroy();for(;i.faces.length<o.faces.length;)i.faces.push(e.face3d().add(i));for(var n=0;n<o.faces.length;n++)i.faces[n].attr(o.faces[n],null,r,a);delete o.faces}return t.apply(this,[].slice.call(arguments,1))}),g(i,"animate",function(t,o,s,r){if(o&&o.faces){for(;i.faces.length>o.faces.length;)i.faces.pop().destroy();for(;i.faces.length<o.faces.length;)i.faces.push(e.face3d().add(i));for(var a=0;a<o.faces.length;a++)i.faces[a].animate(o.faces[a],s,r);delete o.faces}return t.apply(this,[].slice.call(arguments,1))}),i.attr(t)},b.prototype.cuboid=function(t){var e=this.g(),i=e.destroy;return t=this.cuboidPath(t),e.attr({"stroke-linejoin":"round"}),e.front=this.path(t[0]).attr({class:"highcharts-3d-front"}).add(e),e.top=this.path(t[1]).attr({class:"highcharts-3d-top"}).add(e),e.side=this.path(t[2]).attr({class:"highcharts-3d-side"}).add(e),e.fillSetter=function(t){return this.front.attr({fill:t}),this.top.attr({fill:n(t).brighten(.1).get()}),this.side.attr({fill:n(t).brighten(-.1).get()}),this.color=t,e.fill=t,this},e.opacitySetter=function(t){return this.front.attr({opacity:t}),this.top.attr({opacity:t}),this.side.attr({opacity:t}),this},e.attr=function(t,e,i,o){if("string"==typeof t&&void 0!==e){var s=t;(t={})[s]=e}return t.shapeArgs||l(t.x)?(t=this.renderer.cuboidPath(t.shapeArgs||t),this.front.attr({d:t[0]}),this.top.attr({d:t[1]}),this.side.attr({d:t[2]}),this):u.prototype.attr.call(this,t,void 0,i,o)},e.animate=function(t,e,i){return l(t.x)&&l(t.y)?(t=this.renderer.cuboidPath(t),this.front.animate({d:t[0]},e,i),this.top.animate({d:t[1]},e,i),this.side.animate({d:t[2]},e,i),this.attr({zIndex:-t[3]})):t.opacity?(this.front.animate(t,e,i),this.top.animate(t,e,i),this.side.animate(t,e,i)):u.prototype.animate.call(this,t,e,i),this},e.destroy=function(){return this.front.destroy(),this.top.destroy(),this.side.destroy(),i.call(this)},e.attr({zIndex:-t[3]}),e},t.SVGRenderer.prototype.cuboidPath=function(e){function i(t){return u[t]}var o,s,r=e.x,n=e.y,l=e.z,h=e.height,c=e.width,p=e.depth,d=a[this.chartIndex],y=d.options.chart.options3d.alpha,z=0,u=f(u=[{x:r,y:n,z:l},{x:r+c,y:n,z:l},{x:r+c,y:n+h,z:l},{x:r,y:n+h,z:l},{x:r,y:n+h,z:l+p},{x:r+c,y:n+h,z:l+p},{x:r+c,y:n,z:l+p},{x:r,y:n,z:l+p}],d,e.insidePlotArea);return e=(o=(s=function(e,o){var s=[[],-1];return e=x(e,i),o=x(o,i),0>t.shapeArea(e)?s=[e,0]:0>t.shapeArea(o)&&(s=[o,1]),s})([3,2,1,0],[7,6,5,4]))[0],c=o[1],h=(o=s([1,6,7,0],[4,5,2,3]))[0],p=o[1],s=(o=s([1,2,5,6],[0,7,4,3]))[0],1===(o=o[1])?z+=1e4*(1e3-r):o||(z+=1e4*r),z+=10*(!p||0<=y&&180>=y||360>y&&357.5<y?d.plotHeight-n:10+n),1===c?z+=100*l:c||(z+=100*(1e3-l)),z=-Math.round(z),[this.toLinePath(e,!0),this.toLinePath(h,!0),this.toLinePath(s,!0),z]},t.SVGRenderer.prototype.arc3d=function(t){function e(t){var e=!1,i={};t=y(t);for(var o in t)-1!==d(o,s)&&(i[o]=t[o],delete t[o],e=!0);return!!e&&i}var i=this.g(),o=i.renderer,s="x y r innerR start end".split(" ");return(t=y(t)).alpha*=h,t.beta*=h,i.top=o.path(),i.side1=o.path(),i.side2=o.path(),i.inn=o.path(),i.out=o.path(),i.onAdd=function(){var t=i.parentGroup,e=i.attr("class");i.top.add(i),c(["out","inn","side1","side2"],function(o){i[o].attr({class:e+" highcharts-3d-side"}).add(t)})},c(["addClass","removeClass"],function(t){i[t]=function(){var e=arguments;c(["top","out","inn","side1","side2"],function(o){i[o][t].apply(i[o],e)})}}),i.setPaths=function(t){var e=i.renderer.arc3dPath(t),o=100*e.zTop;i.attribs=t,i.top.attr({d:e.top,zIndex:e.zTop}),i.inn.attr({d:e.inn,zIndex:e.zInn}),i.out.attr({d:e.out,zIndex:e.zOut}),i.side1.attr({d:e.side1,zIndex:e.zSide1}),i.side2.attr({d:e.side2,zIndex:e.zSide2}),i.zIndex=o,i.attr({zIndex:o}),t.center&&(i.top.setRadialReference(t.center),delete t.center)},i.setPaths(t),i.fillSetter=function(t){var e=n(t).brighten(-.1).get();return this.fill=t,this.side1.attr({fill:e}),this.side2.attr({fill:e}),this.inn.attr({fill:e}),this.out.attr({fill:e}),this.top.attr({fill:t}),this},c(["opacity","translateX","translateY","visibility"],function(t){i[t+"Setter"]=function(t,e){i[e]=t,c(["out","inn","side1","side2","top"],function(o){i[o].attr(e,t)})}}),g(i,"attr",function(t,o){var s;return"object"==typeof o&&(s=e(o))&&(p(i.attribs,s),i.setPaths(i.attribs)),t.apply(this,[].slice.call(arguments,1))}),g(i,"animate",function(t,o,s,a){var n,l,h=this.attribs;return delete o.center,delete o.z,delete o.depth,delete o.alpha,delete o.beta,(l=r(z(s,this.renderer.globalAnimation))).duration&&(n=e(o),o.dummy=i.dummy++,n&&(l.step=function(t,e){function i(t){return h[t]+(z(n[t],h[t])-h[t])*e.pos}"dummy"===e.prop&&e.elem.setPaths(y(h,{x:i("x"),y:i("y"),r:i("r"),innerR:i("innerR"),start:i("start"),end:i("end")}))}),s=l),t.call(this,o,s,a)}),i.dummy=0,i.destroy=function(){this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),u.prototype.destroy.call(this)},i.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},i.show=function(){this.top.show(),this.out.show(),this.inn.show(),this.side1.show(),this.side2.show()},i},b.prototype.arc3dPath=function(t){function r(t){return(t%=2*Math.PI)>Math.PI&&(t=2*Math.PI-t),t}var a=t.x,n=t.y,l=t.start,h=t.end-1e-5,c=t.r,p=t.innerR,d=t.depth,x=t.alpha,y=t.beta,f=Math.cos(l),z=Math.sin(l);t=Math.cos(h);var u=Math.sin(h),b=c*Math.cos(y),g=(c=c*Math.cos(x),p*Math.cos(y)),v=p*Math.cos(x),m=(p=d*Math.sin(y),d*Math.sin(x)),M=(d=(d=(d=(d=(d=["M",a+b*f,n+c*z]).concat(e(a,n,b,c,l,h,0,0))).concat(["L",a+g*t,n+v*u])).concat(e(a,n,g,v,h,l,0,0))).concat(["Z"]),0<y?Math.PI/2:0),A=(y=0<x?0:Math.PI/2,M=l>-M?l:h>-M?-M:l,h<o-y?h:l<o-y?o-y:h),P=2*o-y;x=(x=["M",a+b*i(M),n+c*s(M)]).concat(e(a,n,b,c,M,A,0,0));return h>P&&l<P?x=(x=(x=(x=(x=(x=(x=(x=x.concat(["L",a+b*i(A)+p,n+c*s(A)+m])).concat(e(a,n,b,c,A,P,p,m))).concat(["L",a+b*i(P),n+c*s(P)])).concat(e(a,n,b,c,P,h,0,0))).concat(["L",a+b*i(h)+p,n+c*s(h)+m])).concat(e(a,n,b,c,h,P,p,m))).concat(["L",a+b*i(P),n+c*s(P)])).concat(e(a,n,b,c,P,A,0,0)):h>o-y&&l<o-y&&(x=(x=(x=(x=x.concat(["L",a+b*Math.cos(A)+p,n+c*Math.sin(A)+m])).concat(e(a,n,b,c,A,h,p,m))).concat(["L",a+b*Math.cos(h),n+c*Math.sin(h)])).concat(e(a,n,b,c,h,A,0,0))),x=(x=(x=x.concat(["L",a+b*Math.cos(A)+p,n+c*Math.sin(A)+m])).concat(e(a,n,b,c,A,M,p,m))).concat(["Z"]),y=(y=(y=(y=(y=["M",a+g*f,n+v*z]).concat(e(a,n,g,v,l,h,0,0))).concat(["L",a+g*Math.cos(h)+p,n+v*Math.sin(h)+m])).concat(e(a,n,g,v,h,l,p,m))).concat(["Z"]),f=["M",a+b*f,n+c*z,"L",a+b*f+p,n+c*z+m,"L",a+g*f+p,n+v*z+m,"L",a+g*f,n+v*z,"Z"],a=["M",a+b*t,n+c*u,"L",a+b*t+p,n+c*u+m,"L",a+g*t+p,n+v*u+m,"L",a+g*t,n+v*u,"Z"],u=Math.atan2(m,-p),n=Math.abs(h+u),t=Math.abs(l+u),l=Math.abs((l+h)/2+u),n=r(n),t=r(t),l=r(l),l*=1e5,h=1e5*t,n*=1e5,{top:d,zTop:1e5*Math.PI+1,out:x,zOut:Math.max(l,h,n),inn:y,zInn:Math.max(l,h,n),side1:f,zSide1:.99*n,side2:a,zSide2:.99*h}}}(t),function(t){var e=t.addEvent,i=t.Chart,o=t.each,s=t.merge,r=t.perspective,a=t.pick,n=t.wrap;i.prototype.is3d=function(){return this.options.chart.options3d&&this.options.chart.options3d.enabled},i.prototype.propsRequireDirtyBox.push("chart.options3d"),i.prototype.propsRequireUpdateSeries.push("chart.options3d"),e(i,"afterInit",function(){var t=this.options;this.is3d()&&o(t.series,function(e){"scatter"===(e.type||t.chart.type||t.chart.defaultSeriesType)&&(e.type="scatter3d")})}),e(i,"addSeries",function(t){this.is3d()&&"scatter"===t.options.type&&(t.options.type="scatter3d")}),t.wrap(t.Chart.prototype,"isInsidePlot",function(t){return this.is3d()||t.apply(this,[].slice.call(arguments,1))}),s(!0,t.getOptions(),{chart:{options3d:{enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,axisLabelPosition:"default",frame:{visible:"default",size:1,bottom:{},top:{},left:{},right:{},back:{},front:{}}}}}),n(i.prototype,"setClassName",function(t){t.apply(this,[].slice.call(arguments,1)),this.is3d()&&(this.container.className+=" highcharts-3d-chart")}),e(t.Chart,"afterSetChartSize",function(){var t,e,i,s,a,n,l,h,c,p,d,x,y,f,z=this.options.chart.options3d;if(this.is3d()){var u=this.inverted,b=this.clipBox,g=this.margin;b[u?"y":"x"]=-(g[3]||0),b[u?"x":"y"]=-(g[0]||0),b[u?"height":"width"]=this.chartWidth+(g[3]||0)+(g[1]||0),b[u?"width":"height"]=this.chartHeight+(g[0]||0)+(g[2]||0),this.scale3d=1,!0===z.fitToPlot&&(this.scale3d=(t=this,e=z.depth,s=t.plotLeft,a=t.plotWidth+s,n=t.plotTop,l=t.plotHeight+n,h=s+t.plotWidth/2,c=n+t.plotHeight/2,p=Number.MAX_VALUE,d=-Number.MAX_VALUE,x=Number.MAX_VALUE,y=-Number.MAX_VALUE,f=1,i=[{x:s,y:n,z:0},{x:s,y:n,z:e}],o([0,1],function(t){i.push({x:a,y:i[t].y,z:i[t].z})}),o([0,1,2,3],function(t){i.push({x:i[t].x,y:l,z:i[t].z})}),i=r(i,t,!1),o(i,function(t){p=Math.min(p,t.x),d=Math.max(d,t.x),x=Math.min(x,t.y),y=Math.max(y,t.y)}),s>p&&(f=Math.min(f,1-Math.abs((s+h)/(p+h))%1)),a<d&&(f=Math.min(f,(a-h)/(d-h))),n>x&&(f=0>x?Math.min(f,(n+c)/(-x+n+c)):Math.min(f,1-(n+c)/(x+c)%1)),l<y&&(f=Math.min(f,Math.abs((l-c)/(y-c)))),f)),this.frame3d=this.get3dFrame()}}),e(i,"beforeRedraw",function(){this.is3d()&&(this.isDirtyBox=!0)}),e(i,"beforeRender",function(){this.is3d()&&(this.frame3d=this.get3dFrame())}),n(i.prototype,"renderSeries",function(t){var e=this.series.length;if(this.is3d())for(;e--;)t=this.series[e],t.translate(),t.render();else t.call(this)}),e(i,"afterDrawChartBox",function(){if(this.is3d()){var e=this.renderer,i=this.options.chart.options3d,o=this.get3dFrame(),s=this.plotLeft,r=this.plotLeft+this.plotWidth,a=this.plotTop,n=this.plotTop+this.plotHeight,l=(i=i.depth,s-(o.left.visible?o.left.size:0)),h=r+(o.right.visible?o.right.size:0),c=a-(o.top.visible?o.top.size:0),p=n+(o.bottom.visible?o.bottom.size:0),d=0-(o.front.visible?o.front.size:0),x=i+(o.back.visible?o.back.size:0),y=this.hasRendered?"animate":"attr";this.frame3d=o,this.frameShapes||(this.frameShapes={bottom:e.polyhedron().add(),top:e.polyhedron().add(),left:e.polyhedron().add(),right:e.polyhedron().add(),back:e.polyhedron().add(),front:e.polyhedron().add()}),this.frameShapes.bottom[y]({class:"highcharts-3d-frame highcharts-3d-frame-bottom",zIndex:o.bottom.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.bottom.color).brighten(.1).get(),vertexes:[{x:l,y:p,z:d},{x:h,y:p,z:d},{x:h,y:p,z:x},{x:l,y:p,z:x}],enabled:o.bottom.visible},{fill:t.color(o.bottom.color).brighten(.1).get(),vertexes:[{x:s,y:n,z:i},{x:r,y:n,z:i},{x:r,y:n,z:0},{x:s,y:n,z:0}],enabled:o.bottom.visible},{fill:t.color(o.bottom.color).brighten(-.1).get(),vertexes:[{x:l,y:p,z:d},{x:l,y:p,z:x},{x:s,y:n,z:i},{x:s,y:n,z:0}],enabled:o.bottom.visible&&!o.left.visible},{fill:t.color(o.bottom.color).brighten(-.1).get(),vertexes:[{x:h,y:p,z:x},{x:h,y:p,z:d},{x:r,y:n,z:0},{x:r,y:n,z:i}],enabled:o.bottom.visible&&!o.right.visible},{fill:t.color(o.bottom.color).get(),vertexes:[{x:h,y:p,z:d},{x:l,y:p,z:d},{x:s,y:n,z:0},{x:r,y:n,z:0}],enabled:o.bottom.visible&&!o.front.visible},{fill:t.color(o.bottom.color).get(),vertexes:[{x:l,y:p,z:x},{x:h,y:p,z:x},{x:r,y:n,z:i},{x:s,y:n,z:i}],enabled:o.bottom.visible&&!o.back.visible}]}),this.frameShapes.top[y]({class:"highcharts-3d-frame highcharts-3d-frame-top",zIndex:o.top.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.top.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:x},{x:h,y:c,z:x},{x:h,y:c,z:d},{x:l,y:c,z:d}],enabled:o.top.visible},{fill:t.color(o.top.color).brighten(.1).get(),vertexes:[{x:s,y:a,z:0},{x:r,y:a,z:0},{x:r,y:a,z:i},{x:s,y:a,z:i}],enabled:o.top.visible},{fill:t.color(o.top.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:x},{x:l,y:c,z:d},{x:s,y:a,z:0},{x:s,y:a,z:i}],enabled:o.top.visible&&!o.left.visible},{fill:t.color(o.top.color).brighten(-.1).get(),vertexes:[{x:h,y:c,z:d},{x:h,y:c,z:x},{x:r,y:a,z:i},{x:r,y:a,z:0}],enabled:o.top.visible&&!o.right.visible},{fill:t.color(o.top.color).get(),vertexes:[{x:l,y:c,z:d},{x:h,y:c,z:d},{x:r,y:a,z:0},{x:s,y:a,z:0}],enabled:o.top.visible&&!o.front.visible},{fill:t.color(o.top.color).get(),vertexes:[{x:h,y:c,z:x},{x:l,y:c,z:x},{x:s,y:a,z:i},{x:r,y:a,z:i}],enabled:o.top.visible&&!o.back.visible}]}),this.frameShapes.left[y]({class:"highcharts-3d-frame highcharts-3d-frame-left",zIndex:o.left.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.left.color).brighten(.1).get(),vertexes:[{x:l,y:p,z:d},{x:s,y:n,z:0},{x:s,y:n,z:i},{x:l,y:p,z:x}],enabled:o.left.visible&&!o.bottom.visible},{fill:t.color(o.left.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:x},{x:s,y:a,z:i},{x:s,y:a,z:0},{x:l,y:c,z:d}],enabled:o.left.visible&&!o.top.visible},{fill:t.color(o.left.color).brighten(-.1).get(),vertexes:[{x:l,y:p,z:x},{x:l,y:c,z:x},{x:l,y:c,z:d},{x:l,y:p,z:d}],enabled:o.left.visible},{fill:t.color(o.left.color).brighten(-.1).get(),vertexes:[{x:s,y:a,z:i},{x:s,y:n,z:i},{x:s,y:n,z:0},{x:s,y:a,z:0}],enabled:o.left.visible},{fill:t.color(o.left.color).get(),vertexes:[{x:l,y:p,z:d},{x:l,y:c,z:d},{x:s,y:a,z:0},{x:s,y:n,z:0}],enabled:o.left.visible&&!o.front.visible},{fill:t.color(o.left.color).get(),vertexes:[{x:l,y:c,z:x},{x:l,y:p,z:x},{x:s,y:n,z:i},{x:s,y:a,z:i}],enabled:o.left.visible&&!o.back.visible}]}),this.frameShapes.right[y]({class:"highcharts-3d-frame highcharts-3d-frame-right",zIndex:o.right.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.right.color).brighten(.1).get(),vertexes:[{x:h,y:p,z:x},{x:r,y:n,z:i},{x:r,y:n,z:0},{x:h,y:p,z:d}],enabled:o.right.visible&&!o.bottom.visible},{fill:t.color(o.right.color).brighten(.1).get(),vertexes:[{x:h,y:c,z:d},{x:r,y:a,z:0},{x:r,y:a,z:i},{x:h,y:c,z:x}],enabled:o.right.visible&&!o.top.visible},{fill:t.color(o.right.color).brighten(-.1).get(),vertexes:[{x:r,y:a,z:0},{x:r,y:n,z:0},{x:r,y:n,z:i},{x:r,y:a,z:i}],enabled:o.right.visible},{fill:t.color(o.right.color).brighten(-.1).get(),vertexes:[{x:h,y:p,z:d},{x:h,y:c,z:d},{x:h,y:c,z:x},{x:h,y:p,z:x}],enabled:o.right.visible},{fill:t.color(o.right.color).get(),vertexes:[{x:h,y:c,z:d},{x:h,y:p,z:d},{x:r,y:n,z:0},{x:r,y:a,z:0}],enabled:o.right.visible&&!o.front.visible},{fill:t.color(o.right.color).get(),vertexes:[{x:h,y:p,z:x},{x:h,y:c,z:x},{x:r,y:a,z:i},{x:r,y:n,z:i}],enabled:o.right.visible&&!o.back.visible}]}),this.frameShapes.back[y]({class:"highcharts-3d-frame highcharts-3d-frame-back",zIndex:o.back.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.back.color).brighten(.1).get(),vertexes:[{x:h,y:p,z:x},{x:l,y:p,z:x},{x:s,y:n,z:i},{x:r,y:n,z:i}],enabled:o.back.visible&&!o.bottom.visible},{fill:t.color(o.back.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:x},{x:h,y:c,z:x},{x:r,y:a,z:i},{x:s,y:a,z:i}],enabled:o.back.visible&&!o.top.visible},{fill:t.color(o.back.color).brighten(-.1).get(),vertexes:[{x:l,y:p,z:x},{x:l,y:c,z:x},{x:s,y:a,z:i},{x:s,y:n,z:i}],enabled:o.back.visible&&!o.left.visible},{fill:t.color(o.back.color).brighten(-.1).get(),vertexes:[{x:h,y:c,z:x},{x:h,y:p,z:x},{x:r,y:n,z:i},{x:r,y:a,z:i}],enabled:o.back.visible&&!o.right.visible},{fill:t.color(o.back.color).get(),vertexes:[{x:s,y:a,z:i},{x:r,y:a,z:i},{x:r,y:n,z:i},{x:s,y:n,z:i}],enabled:o.back.visible},{fill:t.color(o.back.color).get(),vertexes:[{x:l,y:p,z:x},{x:h,y:p,z:x},{x:h,y:c,z:x},{x:l,y:c,z:x}],enabled:o.back.visible}]}),this.frameShapes.front[y]({class:"highcharts-3d-frame highcharts-3d-frame-front",zIndex:o.front.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.front.color).brighten(.1).get(),vertexes:[{x:l,y:p,z:d},{x:h,y:p,z:d},{x:r,y:n,z:0},{x:s,y:n,z:0}],enabled:o.front.visible&&!o.bottom.visible},{fill:t.color(o.front.color).brighten(.1).get(),vertexes:[{x:h,y:c,z:d},{x:l,y:c,z:d},{x:s,y:a,z:0},{x:r,y:a,z:0}],enabled:o.front.visible&&!o.top.visible},{fill:t.color(o.front.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:d},{x:l,y:p,z:d},{x:s,y:n,z:0},{x:s,y:a,z:0}],enabled:o.front.visible&&!o.left.visible},{fill:t.color(o.front.color).brighten(-.1).get(),vertexes:[{x:h,y:p,z:d},{x:h,y:c,z:d},{x:r,y:a,z:0},{x:r,y:n,z:0}],enabled:o.front.visible&&!o.right.visible},{fill:t.color(o.front.color).get(),vertexes:[{x:r,y:a,z:0},{x:s,y:a,z:0},{x:s,y:n,z:0},{x:r,y:n,z:0}],enabled:o.front.visible},{fill:t.color(o.front.color).get(),vertexes:[{x:h,y:p,z:d},{x:l,y:p,z:d},{x:l,y:c,z:d},{x:h,y:c,z:d}],enabled:o.front.visible}]})}}),i.prototype.retrieveStacks=function(t){var e,i=this.series,s={},r=1;return o(this.series,function(o){e=a(o.options.stack,t?0:i.length-1-o.index),s[e]?s[e].series.push(o):(s[e]={series:[o],position:r},r++)}),s.totalStacks=r+1,s},i.prototype.get3dFrame=function(){var e=this,i=e.options.chart.options3d,s=i.frame,n=e.plotLeft,l=e.plotLeft+e.plotWidth,h=e.plotTop,c=e.plotTop+e.plotHeight,p=i.depth,d=(u=function(i){return.5<(i=t.shapeArea3d(i,e))?1:-.5>i?-1:0})([{x:n,y:c,z:p},{x:l,y:c,z:p},{x:l,y:c,z:0},{x:n,y:c,z:0}]),x=u([{x:n,y:h,z:0},{x:l,y:h,z:0},{x:l,y:h,z:p},{x:n,y:h,z:p}]),y=u([{x:n,y:h,z:0},{x:n,y:h,z:p},{x:n,y:c,z:p},{x:n,y:c,z:0}]),f=u([{x:l,y:h,z:p},{x:l,y:h,z:0},{x:l,y:c,z:0},{x:l,y:c,z:p}]),z=u([{x:n,y:c,z:0},{x:l,y:c,z:0},{x:l,y:h,z:0},{x:n,y:h,z:0}]),u=u([{x:n,y:h,z:p},{x:l,y:h,z:p},{x:l,y:c,z:p},{x:n,y:c,z:p}]),b=!1,g=!1,v=!1,m=!1;o([].concat(e.xAxis,e.yAxis,e.zAxis),function(t){t&&(t.horiz?t.opposite?g=!0:b=!0:t.opposite?m=!0:v=!0)});var M=function(t,e,i){for(var o=["size","color","visible"],s={},r=0;r<o.length;r++)for(var n=o[r],l=0;l<t.length;l++)if("object"==typeof t[l]){var h=t[l][n];if(void 0!==h&&null!==h){s[n]=h;break}}return t=i,!0===s.visible||!1===s.visible?t=s.visible:"auto"===s.visible&&(t=0<e),{size:a(s.size,1),color:a(s.color,"none"),frontFacing:0<e,visible:t}};s={bottom:M([s.bottom,s.top,s],d,b),top:M([s.top,s.bottom,s],x,g),left:M([s.left,s.right,s.side,s],y,v),right:M([s.right,s.left,s.side,s],f,m),back:M([s.back,s.front,s],u,!0),front:M([s.front,s.back,s],z,!1)};return"auto"===i.axisLabelPosition?(i=[],(f=function(t,e){return t.visible!==e.visible||t.visible&&e.visible&&t.frontFacing!==e.frontFacing})(s.left,s.front)&&i.push({y:(h+c)/2,x:n,z:0,xDir:{x:1,y:0,z:0}}),f(s.left,s.back)&&i.push({y:(h+c)/2,x:n,z:p,xDir:{x:0,y:0,z:-1}}),f(s.right,s.front)&&i.push({y:(h+c)/2,x:l,z:0,xDir:{x:0,y:0,z:1}}),f(s.right,s.back)&&i.push({y:(h+c)/2,x:l,z:p,xDir:{x:-1,y:0,z:0}}),d=[],f(s.bottom,s.front)&&d.push({x:(n+l)/2,y:c,z:0,xDir:{x:1,y:0,z:0}}),f(s.bottom,s.back)&&d.push({x:(n+l)/2,y:c,z:p,xDir:{x:-1,y:0,z:0}}),x=[],f(s.top,s.front)&&x.push({x:(n+l)/2,y:h,z:0,xDir:{x:1,y:0,z:0}}),f(s.top,s.back)&&x.push({x:(n+l)/2,y:h,z:p,xDir:{x:-1,y:0,z:0}}),y=[],f(s.bottom,s.left)&&y.push({z:(0+p)/2,y:c,x:n,xDir:{x:0,y:0,z:-1}}),f(s.bottom,s.right)&&y.push({z:(0+p)/2,y:c,x:l,xDir:{x:0,y:0,z:1}}),c=[],f(s.top,s.left)&&c.push({z:(0+p)/2,y:h,x:n,xDir:{x:0,y:0,z:-1}}),f(s.top,s.right)&&c.push({z:(0+p)/2,y:h,x:l,xDir:{x:0,y:0,z:1}}),n=function(t,i,o){if(0===t.length)return null;if(1===t.length)return t[0];for(var s=0,a=r(t,e,!1),n=1;n<a.length;n++)o*a[n][i]>o*a[s][i]?s=n:o*a[n][i]==o*a[s][i]&&a[n].z<a[s].z&&(s=n);return t[s]},s.axes={y:{left:n(i,"x",-1),right:n(i,"x",1)},x:{top:n(x,"y",-1),bottom:n(d,"y",1)},z:{top:n(c,"y",-1),bottom:n(y,"y",1)}}):s.axes={y:{left:{x:n,z:0,xDir:{x:1,y:0,z:0}},right:{x:l,z:0,xDir:{x:0,y:0,z:1}}},x:{top:{y:h,z:0,xDir:{x:1,y:0,z:0}},bottom:{y:c,z:0,xDir:{x:1,y:0,z:0}}},z:{top:{x:v?l:n,y:h,xDir:v?{x:0,y:0,z:1}:{x:0,y:0,z:-1}},bottom:{x:v?l:n,y:c,xDir:v?{x:0,y:0,z:1}:{x:0,y:0,z:-1}}}},s},t.Fx.prototype.matrixSetter=function(){var e;if(1>this.pos&&(t.isArray(this.start)||t.isArray(this.end))){var i=this.start||[1,0,0,1,0,0],o=this.end||[1,0,0,1,0,0];e=[];for(var s=0;6>s;s++)e.push(this.pos*o[s]+(1-this.pos)*i[s])}else e=this.end;this.elem.attr(this.prop,e,null,!0)}}(t),function(t){function e(t,e,i){if(!t.chart.is3d()||"colorAxis"===t.coll)return e;var o=t.chart,s=a*o.options.chart.options3d.alpha,r=a*o.options.chart.options3d.beta,n=d(i&&t.options.title.position3d,t.options.labels.position3d);i=d(i&&t.options.title.skew3d,t.options.labels.skew3d);var l=o.frame3d,h=o.plotLeft,p=o.plotWidth+h,y=o.plotTop,f=o.plotHeight+y,z=(o=!1,0),u=0,b={x:0,y:1,z:0};if(e=t.swapZ({x:e.x,y:e.y,z:0}),t.isZAxis)if(t.opposite){if(null===l.axes.z.top)return{};u=e.y-y,e.x=l.axes.z.top.x,e.y=l.axes.z.top.y,h=l.axes.z.top.xDir,o=!l.top.frontFacing}else{if(null===l.axes.z.bottom)return{};u=e.y-f,e.x=l.axes.z.bottom.x,e.y=l.axes.z.bottom.y,h=l.axes.z.bottom.xDir,o=!l.bottom.frontFacing}else if(t.horiz)if(t.opposite){if(null===l.axes.x.top)return{};u=e.y-y,e.y=l.axes.x.top.y,e.z=l.axes.x.top.z,h=l.axes.x.top.xDir,o=!l.top.frontFacing}else{if(null===l.axes.x.bottom)return{};u=e.y-f,e.y=l.axes.x.bottom.y,e.z=l.axes.x.bottom.z,h=l.axes.x.bottom.xDir,o=!l.bottom.frontFacing}else if(t.opposite){if(null===l.axes.y.right)return{};z=e.x-p,e.x=l.axes.y.right.x,e.z=l.axes.y.right.z,h={x:(h=l.axes.y.right.xDir).z,y:h.y,z:-h.x}}else{if(null===l.axes.y.left)return{};z=e.x-h,e.x=l.axes.y.left.x,e.z=l.axes.y.left.z,h=l.axes.y.left.xDir}return"chart"!==n&&("flap"===n?t.horiz?(r=Math.sin(s),s=Math.cos(s),t.opposite&&(r=-r),o&&(r=-r),b={x:h.z*r,y:s,z:-h.x*r}):h={x:Math.cos(r),y:0,z:Math.sin(r)}:"ortho"===n?t.horiz?(b=Math.cos(s),n=Math.sin(r)*b,s=-Math.sin(s),r=-b*Math.cos(r),b={x:h.y*r-h.z*s,y:h.z*n-h.x*r,z:h.x*s-h.y*n},s=1/Math.sqrt(b.x*b.x+b.y*b.y+b.z*b.z),o&&(s=-s),b={x:s*b.x,y:s*b.y,z:s*b.z}):h={x:Math.cos(r),y:0,z:Math.sin(r)}:t.horiz?b={x:Math.sin(r)*Math.sin(s),y:Math.cos(s),z:-Math.cos(r)*Math.sin(s)}:h={x:Math.cos(r),y:0,z:Math.sin(r)}),e.x+=z*h.x+u*b.x,e.y+=z*h.y+u*b.y,e.z+=z*h.z+u*b.z,o=c([e],t.chart)[0],i&&(0>x(c([e,{x:e.x+h.x,y:e.y+h.y,z:e.z+h.z},{x:e.x+b.x,y:e.y+b.y,z:e.z+b.z}],t.chart))&&(h={x:-h.x,y:-h.y,z:-h.z}),t=c([{x:e.x,y:e.y,z:e.z},{x:e.x+h.x,y:e.y+h.y,z:e.z+h.z},{x:e.x+b.x,y:e.y+b.y,z:e.z+b.z}],t.chart),o.matrix=[t[1].x-t[0].x,t[1].y-t[0].y,t[2].x-t[0].x,t[2].y-t[0].y,o.x,o.y],o.matrix[4]-=o.x*o.matrix[0]+o.y*o.matrix[2],o.matrix[5]-=o.x*o.matrix[1]+o.y*o.matrix[3]),o}var i,o=t.addEvent,s=t.Axis,r=t.Chart,a=t.deg2rad,n=t.each,l=t.extend,h=t.merge,c=t.perspective,p=t.perspective3D,d=t.pick,x=t.shapeArea,y=t.splat,f=t.Tick,z=t.wrap;h(!0,s.prototype.defaultOptions,{labels:{position3d:"offset",skew3d:!1},title:{position3d:null,skew3d:null}}),o(s,"afterSetOptions",function(){var t;this.chart.is3d&&this.chart.is3d()&&"colorAxis"!==this.coll&&((t=this.options).tickWidth=d(t.tickWidth,0),t.gridLineWidth=d(t.gridLineWidth,1))}),z(s.prototype,"getPlotLinePath",function(t){var e=t.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d()||"colorAxis"===this.coll||null===e)return e;var i=(o=this.chart).options.chart.options3d,o=(i=this.isZAxis?o.plotWidth:i.depth,o.frame3d);e=[this.swapZ({x:e[1],y:e[2],z:0}),this.swapZ({x:e[1],y:e[2],z:i}),this.swapZ({x:e[4],y:e[5],z:0}),this.swapZ({x:e[4],y:e[5],z:i})],i=[];return this.horiz?(this.isZAxis?(o.left.visible&&i.push(e[0],e[2]),o.right.visible&&i.push(e[1],e[3])):(o.front.visible&&i.push(e[0],e[2]),o.back.visible&&i.push(e[1],e[3])),o.top.visible&&i.push(e[0],e[1]),o.bottom.visible&&i.push(e[2],e[3])):(o.front.visible&&i.push(e[0],e[2]),o.back.visible&&i.push(e[1],e[3]),o.left.visible&&i.push(e[0],e[1]),o.right.visible&&i.push(e[2],e[3])),i=c(i,this.chart,!1),this.chart.renderer.toLineSegments(i)}),z(s.prototype,"getLinePath",function(t){return this.chart.is3d()&&"colorAxis"!==this.coll?[]:t.apply(this,[].slice.call(arguments,1))}),z(s.prototype,"getPlotBandPath",function(t){if(!this.chart.is3d()||"colorAxis"===this.coll)return t.apply(this,[].slice.call(arguments,1));var e=(o=arguments)[2],i=[],o=this.getPlotLinePath(o[1]);e=this.getPlotLinePath(e);if(o&&e)for(var s=0;s<o.length;s+=6)i.push("M",o[s+1],o[s+2],"L",o[s+4],o[s+5],"L",e[s+4],e[s+5],"L",e[s+1],e[s+2],"Z");return i}),z(f.prototype,"getMarkPath",function(t){var i=t.apply(this,[].slice.call(arguments,1));i=[e(this.axis,{x:i[1],y:i[2],z:0}),e(this.axis,{x:i[4],y:i[5],z:0})];return this.axis.chart.renderer.toLineSegments(i)}),o(f,"afterGetLabelPosition",function(t){l(t.pos,e(this.axis,t.pos))}),z(s.prototype,"getTitlePosition",function(t){return e(this,t.apply(this,[].slice.call(arguments,1)),!0)}),o(s,"drawCrosshair",function(t){this.chart.is3d()&&"colorAxis"!==this.coll&&t.point&&(t.point.crosshairPos=this.isXAxis?t.point.axisXpos:this.len-t.point.axisYpos)}),o(s,"destroy",function(){n(["backFrame","bottomFrame","sideFrame"],function(t){this[t]&&(this[t]=this[t].destroy())},this)}),s.prototype.swapZ=function(t,e){return this.isZAxis?{x:(e=e?0:this.chart.plotLeft)+t.z,y:t.y,z:t.x-e}:t},i=t.ZAxis=function(){this.init.apply(this,arguments)},l(i.prototype,s.prototype),l(i.prototype,{isZAxis:!0,setOptions:function(t){t=h({offset:0,lineWidth:0},t),s.prototype.setOptions.call(this,t),this.coll="zAxis"},setAxisSize:function(){s.prototype.setAxisSize.call(this),this.width=this.len=this.chart.options.chart.options3d.depth,this.right=this.chart.chartWidth-this.width-this.left},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.ignoreMinPadding=t.ignoreMaxPadding=null,t.buildStacks&&t.buildStacks(),n(t.series,function(i){!i.visible&&e.options.chart.ignoreHiddenSeries||(t.hasVisibleSeries=!0,(i=i.zData).length&&(t.dataMin=Math.min(d(t.dataMin,i[0]),Math.min.apply(null,i)),t.dataMax=Math.max(d(t.dataMax,i[0]),Math.max.apply(null,i))))})}}),o(r,"afterGetAxes",function(){var t=this,e=(e=this.options).zAxis=y(e.zAxis||{});t.is3d()&&(this.zAxis=[],n(e,function(e,o){e.index=o,e.isX=!0,new i(t,e).setScale()}))}),z(s.prototype,"getSlotWidth",function(t,e){if(this.chart.is3d()&&e&&e.label&&this.categories){var i,o,s=this.chart,r=this.ticks,a=this.gridGroup.element.childNodes[0].getBBox(),n=s.frameShapes.left.getBBox(),l=s.options.chart.options3d,h=(s={x:s.plotWidth/2,y:s.plotHeight/2,z:l.depth/2,vd:d(l.depth,1)*d(l.viewDistance,0)},r[(l=e.pos)-1]);r=r[l+1];return 0!==l&&h&&(i=p({x:h.label.xy.x,y:h.label.xy.y,z:null},s,s.vd)),r&&r.label.xy&&(o=p({x:r.label.xy.x,y:r.label.xy.y,z:null},s,s.vd)),r={x:e.label.xy.x,y:e.label.xy.y,z:null},r=p(r,s,s.vd),Math.abs(i?r.x-i.x:o?o.x-r.x:a.x-n.x)}return t.apply(this,[].slice.call(arguments,1))})}(t),r=(s=t).addEvent,a=s.perspective,n=s.pick,r(s.Series,"afterTranslate",function(){this.chart.is3d()&&this.translate3dPoints()}),s.Series.prototype.translate3dPoints=function(){var t,e,i,o=this.chart,s=n(this.zAxis,o.options.zAxis[0]),r=[];for(i=0;i<this.data.length;i++)t=this.data[i],s&&s.translate?(e=s.isLog&&s.val2lin?s.val2lin(t.z):t.z,t.plotZ=s.translate(e),t.isInside=!!t.isInside&&e>=s.min&&e<=s.max):t.plotZ=0,t.axisXpos=t.plotX,t.axisYpos=t.plotY,t.axisZpos=t.plotZ,r.push({x:t.plotX,y:t.plotY,z:t.plotZ});for(o=a(r,o,!0),i=0;i<this.data.length;i++)t=this.data[i],s=o[i],t.plotX=s.x,t.plotY=s.y,t.plotZ=s.z},function(t){function e(t){var e=t.apply(this,[].slice.call(arguments,1));return this.chart.is3d&&this.chart.is3d()&&(e.stroke=this.options.edgeColor||e.fill,e["stroke-width"]=r(this.options.edgeWidth,1)),e}var i=t.addEvent,o=t.each,s=t.perspective,r=t.pick,a=t.Series,n=t.seriesTypes,l=t.inArray,h=t.svg,c=t.wrap;c(n.column.prototype,"translate",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.translate3dShapes()}),c(t.Series.prototype,"alignDataLabel",function(t){arguments[3].outside3dPlot=arguments[1].outside3dPlot,t.apply(this,[].slice.call(arguments,1))}),c(t.Series.prototype,"justifyDataLabel",function(t){return!arguments[2].outside3dPlot&&t.apply(this,[].slice.call(arguments,1))}),n.column.prototype.translate3dPoints=function(){},n.column.prototype.translate3dShapes=function(){var t=this,e=t.chart,i=t.options,r=i.depth||25,a=(i.stacking?i.stack||0:t.index)*(r+(i.groupZPadding||1)),n=t.borderWidth%2?.5:0;e.inverted&&!t.yAxis.reversed&&(n*=-1),!1!==i.grouping&&(a=0),a+=i.groupZPadding||1,o(t.data,function(i){if(i.outside3dPlot=null,null!==i.y){var l,h=i.shapeArgs,c=i.tooltipPos;o([["x","width"],["y","height"]],function(e){if(0>(l=h[e[0]]-n)&&(h[e[1]]+=h[e[0]]+n,h[e[0]]=-n,l=0),l+h[e[1]]>t[e[0]+"Axis"].len&&0!==h[e[1]]&&(h[e[1]]=t[e[0]+"Axis"].len-h[e[0]]),0!==h[e[1]]&&(h[e[0]]>=t[e[0]+"Axis"].len||h[e[0]]+h[e[1]]<=n)){for(var o in h)h[o]=0;i.outside3dPlot=!0}}),i.shapeType="cuboid",h.z=a,h.depth=r,h.insidePlotArea=!0,c=s([{x:c[0],y:c[1],z:a}],e,!0)[0],i.tooltipPos=[c.x,c.y]}}),t.z=a},c(n.column.prototype,"animate",function(t){if(this.chart.is3d()){var e=arguments[1],i=this.yAxis,s=this,r=this.yAxis.reversed;h&&(e?o(s.data,function(t){null!==t.y&&(t.height=t.shapeArgs.height,t.shapey=t.shapeArgs.y,t.shapeArgs.height=1,r||(t.shapeArgs.y=t.stackY?t.plotY+i.translate(t.stackY):t.plotY+(t.negative?-t.height:t.height)))}):(o(s.data,function(t){null!==t.y&&(t.shapeArgs.height=t.height,t.shapeArgs.y=t.shapey,t.graphic&&t.graphic.animate(t.shapeArgs,s.options.animation))}),this.drawDataLabels(),s.animate=null))}else t.apply(this,[].slice.call(arguments,1))}),c(n.column.prototype,"plotGroup",function(t,e,i,o,s,r){return this.chart.is3d()&&r&&!this[e]&&(this.chart.columnGroup||(this.chart.columnGroup=this.chart.renderer.g("columnGroup").add(r)),this[e]=this.chart.columnGroup,this.chart.columnGroup.attr(this.getPlotBox()),this[e].survive=!0),t.apply(this,Array.prototype.slice.call(arguments,1))}),c(n.column.prototype,"setVisible",function(t,e){var i,s=this;s.chart.is3d()&&o(s.data,function(t){i=(t.visible=t.options.visible=e=void 0===e?!t.visible:e)?"visible":"hidden",s.options.data[l(t,s.data)]=t.options,t.graphic&&t.graphic.attr({visibility:i})}),t.apply(this,Array.prototype.slice.call(arguments,1))}),n.column.prototype.handle3dGrouping=!0,i(a,"afterInit",function(){if(this.chart.is3d()&&this.handle3dGrouping){var t=this.options,e=t.grouping,i=t.stacking,o=r(this.yAxis.options.reversedStacks,!0),s=0;if(void 0===e||e){for(e=this.chart.retrieveStacks(i),s=t.stack||0,i=0;i<e[s].series.length&&e[s].series[i]!==this;i++);s=10*(e.totalStacks-e[s].position)+(o?i:-i),this.xAxis.reversed||(s=10*e.totalStacks-s)}t.zIndex=s}}),c(n.column.prototype,"pointAttribs",e),n.columnrange&&(c(n.columnrange.prototype,"pointAttribs",e),n.columnrange.prototype.plotGroup=n.column.prototype.plotGroup,n.columnrange.prototype.setVisible=n.column.prototype.setVisible),c(a.prototype,"alignDataLabel",function(t){if(this.chart.is3d()&&("column"===this.type||"columnrange"===this.type)){var e=(i=arguments)[4],i=i[1],o={x:e.x,y:e.y,z:this.z};o=s([o],this.chart,!0)[0];e.x=o.x,e.y=i.outside3dPlot?-9e9:o.y}t.apply(this,[].slice.call(arguments,1))}),c(t.StackItem.prototype,"getStackBox",function(e,i){var o=e.apply(this,[].slice.call(arguments,1));if(i.is3d()){var s={x:o.x,y:o.y,z:0};s=t.perspective([s],i,!0)[0];o.x=s.x,o.y=s.y}return o})}(t),h=(l=t).deg2rad,c=l.each,p=l.pick,d=l.seriesTypes,x=l.svg,(l=l.wrap)(d.pie.prototype,"translate",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var e=this,i=e.options,o=i.depth||0,s=e.chart.options.chart.options3d,r=s.alpha,a=s.beta,n=(n=i.stacking?(i.stack||0)*o:e._i*o)+o/2;!1!==i.grouping&&(n=0),c(e.data,function(t){var s=t.shapeArgs;t.shapeType="arc3d",s.z=n,s.depth=.75*o,s.alpha=r,s.beta=a,s.center=e.center,s=(s.end+s.start)/2,t.slicedTranslation={translateX:Math.round(Math.cos(s)*i.slicedOffset*Math.cos(r*h)),translateY:Math.round(Math.sin(s)*i.slicedOffset*Math.cos(r*h))}})}}),l(d.pie.prototype.pointClass.prototype,"haloPath",function(t){var e=arguments;return this.series.chart.is3d()?[]:t.call(this,e[1])}),l(d.pie.prototype,"pointAttribs",function(t,e,i){return t=t.call(this,e,i),i=this.options,this.chart.is3d()&&(t.stroke=i.edgeColor||e.color||this.color,t["stroke-width"]=p(i.edgeWidth,1)),t}),l(d.pie.prototype,"drawPoints",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&c(this.points,function(t){var e=t.graphic;e&&e[t.y&&t.visible?"show":"hide"]()})}),l(d.pie.prototype,"drawDataLabels",function(t){if(this.chart.is3d()){var e=this.chart.options.chart.options3d;c(this.data,function(t){var i=t.shapeArgs,o=i.r,s=(i.start+i.end)/2,r=t.labelPos,a=-o*(1-Math.cos((i.alpha||e.alpha)*h))*Math.sin(s),n=o*(Math.cos((i.beta||e.beta)*h)-1)*Math.cos(s);c([0,2,4],function(t){r[t]+=n,r[t+1]+=a})})}t.apply(this,[].slice.call(arguments,1))}),l(d.pie.prototype,"addPoint",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.update(this.userOptions,!0)}),l(d.pie.prototype,"animate",function(t){if(this.chart.is3d()){var e=arguments[1],i=this.options.animation,o=this.center,s=this.group,r=this.markerGroup;x&&(!0===i&&(i={}),e?(s.oldtranslateX=s.translateX,s.oldtranslateY=s.translateY,e={translateX:o[0],translateY:o[1],scaleX:.001,scaleY:.001},s.attr(e),r&&(r.attrSetters=s.attrSetters,r.attr(e))):(e={translateX:s.oldtranslateX,translateY:s.oldtranslateY,scaleX:1,scaleY:1},s.animate(e,i),r&&r.animate(e,i),this.animate=null))}else t.apply(this,[].slice.call(arguments,1))}),f=(y=t).Point,z=y.seriesType,u=y.seriesTypes,z("scatter3d","scatter",{tooltip:{pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"}},{pointAttribs:function(t){var e=u.scatter.prototype.pointAttribs.apply(this,arguments);return this.chart.is3d()&&t&&(e.zIndex=y.pointCameraDistance(t,this.chart)),e},axisTypes:["xAxis","yAxis","zAxis"],pointArrayMap:["x","y","z"],parallelArrays:["x","y","z"],directTouch:!0},{applyOptions:function(){return f.prototype.applyOptions.apply(this,arguments),void 0===this.z&&(this.z=0),this}}),g=(b=t).addEvent,v=b.Axis,m=b.SVGRenderer,(M=b.VMLRenderer)&&(b.setOptions({animate:!1}),M.prototype.face3d=m.prototype.face3d,M.prototype.polyhedron=m.prototype.polyhedron,M.prototype.cuboid=m.prototype.cuboid,M.prototype.cuboidPath=m.prototype.cuboidPath,M.prototype.toLinePath=m.prototype.toLinePath,M.prototype.toLineSegments=m.prototype.toLineSegments,M.prototype.createElement3D=m.prototype.createElement3D,M.prototype.arc3d=function(t){return(t=m.prototype.arc3d.call(this,t)).css({zIndex:t.zIndex}),t},b.VMLRenderer.prototype.arc3dPath=b.SVGRenderer.prototype.arc3dPath,g(v,"render",function(){this.sideFrame&&(this.sideFrame.css({zIndex:0}),this.sideFrame.front.attr({fill:this.sideFrame.color})),this.bottomFrame&&(this.bottomFrame.css({zIndex:1}),this.bottomFrame.front.attr({fill:this.bottomFrame.color})),this.backFrame&&(this.backFrame.css({zIndex:0}),this.backFrame.front.attr({fill:this.backFrame.color}))}))});