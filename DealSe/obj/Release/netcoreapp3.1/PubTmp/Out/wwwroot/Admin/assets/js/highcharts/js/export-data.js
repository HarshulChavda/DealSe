!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e;(e=t).ajax=function(t){var o=e.merge(!0,{url:!1,type:"GET",dataType:"json",success:!1,error:!1,data:!1,headers:{}},t);t={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"};var a=new XMLHttpRequest;if(!o.url)return!1;a.open(o.type.toUpperCase(),o.url,!0),a.setRequestHeader("Content-Type",t[o.dataType]||t.text),e.objectEach(o.headers,function(t,e){a.setRequestHeader(e,t)}),a.onreadystatechange=function(){var t;if(4===a.readyState){if(200===a.status){if(t=a.responseText,"json"===o.dataType)try{t=JSON.parse(t)}catch(t){return void(o.error&&o.error(a,t))}return o.success&&o.success(t)}o.error&&o.error(a,a.responseText)}};try{o.data=JSON.stringify(o.data)}catch(t){}a.send(o.data||!0)},function(t){var e=t.defined,o=t.each,a=t.pick,n=t.win,i=n.document,r=t.seriesTypes,s=void 0!==i.createElement("a").download;t.setOptions({exporting:{csv:{columnHeaderFormatter:null,dateFormat:"%Y-%m-%d %H:%M:%S",decimalPoint:null,itemDelimiter:null,lineDelimiter:"\n"},showTable:!1,useMultiLevelHeaders:!0,useRowspanHeaders:!0},lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",openInCloud:"Open in Highcharts Cloud",viewData:"View data table"}}),t.addEvent(t.Chart,"render",function(){this.options&&this.options.exporting&&this.options.exporting.showTable&&this.viewData()}),t.Chart.prototype.setUpKeyToAxis=function(){r.arearange&&(r.arearange.prototype.keyToAxis={low:"y",high:"y"})},t.Chart.prototype.getDataRows=function(n){var i,r,s,l,p,c,d,h=this.time,u=this.options.exporting&&this.options.exporting.csv||{},m=this.xAxis,x={},f=[],g=[],y=[],v=function(e,o,a){if(u.columnHeaderFormatter){var i=u.columnHeaderFormatter(e,o,a);if(!1!==i)return i}return e?e instanceof t.Axis?e.options.title&&e.options.title.text||(e.isDatetimeAxis?"DateTime":"Category"):n?{columnTitle:1<a?o:e.name,topLevelColumnTitle:e.name}:e.name+(1<a?" ("+o+")":""):"Category"},b=[];l=0,this.setUpKeyToAxis(),o(this.series,function(e){var i,r,p=e.options.keys||e.pointArrayMap||["y"],c=p.length,d=!e.requireSorting&&{},f={},w={},C=t.inArray(e.xAxis,m);if(o(p,function(t){var o=(e.keyToAxis&&e.keyToAxis[t]||t)+"Axis";f[t]=e[o]&&e[o].categories||[],w[t]=e[o]&&e[o].isDatetimeAxis}),!1!==e.options.includeInCSVExport&&!e.options.isInternal&&!1!==e.visible){for(t.find(b,function(t){return t[0]===C})||b.push([C,l]),r=0;r<c;)s=v(e,p[r],p.length),y.push(s.columnTitle||s),n&&g.push(s.topLevelColumnTitle||s),r++;i={chart:e.chart,autoIncrement:e.autoIncrement,options:e.options,pointArrayMap:e.pointArrayMap},o(e.options.data,function(t,o){var n,s;for(s={series:i},e.pointClass.prototype.applyOptions.apply(s,[t]),t=s.x,n=e.data[o]&&e.data[o].name,d&&(d[t]&&(t+="|"+o),d[t]=!0),r=0,e.xAxis&&"name"!==e.exportKey||(t=n),x[t]||(x[t]=[],x[t].xValues=[]),x[t].x=s.x,x[t].name=n,x[t].xValues[C]=s.x;r<c;)o=p[r],n=s[o],x[t][l+r]=a(f[o][n],w[o]?h.dateFormat(u.dateFormat,n):null,n),r++}),l+=r}});for(r in x)x.hasOwnProperty(r)&&f.push(x[r]);for(r=n?[g,y]:[y],l=b.length;l--;)c=b[l][0],d=b[l][1],i=m[c],f.sort(function(t,e){return t.xValues[c]-e.xValues[c]}),p=v(i),r[0].splice(d,0,p),n&&r[1]&&r[1].splice(d,0,p),o(f,function(t){var o=t.name;i&&!e(o)&&(i.isDatetimeAxis?(t.x instanceof Date&&(t.x=t.x.getTime()),o=h.dateFormat(u.dateFormat,t.x)):o=i.categories?a(i.names[t.x],i.categories[t.x],t.x):t.x),t.splice(d,0,o)});return r=r.concat(f),t.fireEvent(this,"exportData",{dataRows:r}),r},t.Chart.prototype.getCSV=function(t){var e="",n=this.getDataRows(),i=this.options.exporting.csv,r=a(i.decimalPoint,","!==i.itemDelimiter&&t?1.1.toLocaleString()[1]:"."),s=a(i.itemDelimiter,","===r?";":","),l=i.lineDelimiter;return o(n,function(t,o){for(var a,i=t.length;i--;)a=t[i],"string"==typeof a&&(a='"'+a+'"'),"number"==typeof a&&"."!==r&&(a=a.toString().replace(".",r)),t[i]=a;e+=t.join(s),o<n.length-1&&(e+=l)}),e},t.Chart.prototype.getTable=function(t){var e="<table>",n=this.options,i=t?1.1.toLocaleString()[1]:".",r=a(n.exporting.useMultiLevelHeaders,!0);t=this.getDataRows(r);var s=0,l=r?t.shift():null,p=t.shift(),c=function(t,e,o,n){var r=a(n,"");return e="text"+(e?" "+e:""),"number"==typeof r?(r=r.toString(),","===i&&(r=r.replace(".",i)),e="number"):n||(e="empty"),"<"+t+(o?" "+o:"")+' class="'+e+'">'+r+"</"+t+">"};!1!==n.exporting.tableCaption&&(e+='<caption class="highcharts-table-caption">'+a(n.exporting.tableCaption,n.title.text?n.title.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):"Chart")+"</caption>");for(var d=0,h=t.length;d<h;++d)t[d].length>s&&(s=t[d].length);return e+=function(t,e,o){var a="<thead>",i=0;o=o||e&&e.length;var s,l,p=0;if(l=r&&t&&e){t:if(l=t.length,e.length===l){for(;l--;)if(t[l]!==e[l]){l=!1;break t}l=!0}else l=!1;l=!l}if(l){for(a+="<tr>";i<o;++i)l=t[i],s=t[i+1],l===s?++p:p?(a+=c("th","highcharts-table-topheading",'scope="col" colspan="'+(p+1)+'"',l),p=0):(l===e[i]?n.exporting.useRowspanHeaders?(s=2,delete e[i]):(s=1,e[i]=""):s=1,a+=c("th","highcharts-table-topheading",'scope="col"'+(1<s?' valign="top" rowspan="'+s+'"':""),l));a+="</tr>"}if(e){for(a+="<tr>",i=0,o=e.length;i<o;++i)void 0!==e[i]&&(a+=c("th",null,'scope="col"',e[i]));a+="</tr>"}return a+"</thead>"}(l,p,Math.max(s,p.length)),e+="<tbody>",o(t,function(t){e+="<tr>";for(var o=0;o<s;o++)e+=c(o?"td":"th",null,o?"":'scope="row"',t[o]);e+="</tr>"}),e+="</tbody></table>"},t.Chart.prototype.fileDownload=function(e,o,a){var r;r=this.options.exporting.filename?this.options.exporting.filename:this.title&&this.title.textStr?this.title.textStr.replace(/ /g,"-").toLowerCase():"chart",n.Blob&&n.navigator.msSaveOrOpenBlob?(e=new n.Blob(["\ufeff"+a],{type:"text/csv"}),n.navigator.msSaveOrOpenBlob(e,r+"."+o)):s?((a=i.createElement("a")).href=e,a.download=r+"."+o,this.container.appendChild(a),a.click(),a.remove()):t.error("The browser doesn't support downloading files")},t.Chart.prototype.downloadCSV=function(){var t=this.getCSV(!0);this.fileDownload("data:text/csv,\ufeff"+encodeURIComponent(t),"csv",t,"text/csv")},t.Chart.prototype.downloadXLS=function(){var t='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";} .text{ mso-number-format:"@";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+this.getTable(!0)+"</body></html>";this.fileDownload("data:application/vnd.ms-excel;base64,"+n.btoa(unescape(encodeURIComponent(t))),"xls",t,"application/vnd.ms-excel")},t.Chart.prototype.viewData=function(){this.dataTableDiv||(this.dataTableDiv=i.createElement("div"),this.dataTableDiv.className="highcharts-data-table",this.renderTo.parentNode.insertBefore(this.dataTableDiv,this.renderTo.nextSibling)),this.dataTableDiv.innerHTML=this.getTable()},t.Chart.prototype.openInCloud=function(){var e,o;(function e(o){Object.keys(o).forEach(function(a){"function"==typeof o[a]&&delete o[a],t.isObject(o[a])&&e(o[a])})})(e=t.merge(this.userOptions)),e={name:e.title&&e.title.text||"Chart title",options:e,settings:{constructor:"Chart",dataProvider:{csv:this.getCSV()}}},o=JSON.stringify(e),function(){var t=i.createElement("form");i.body.appendChild(t),t.method="post",t.action="https://cloud-api.highcharts.com/openincloud",t.target="_blank";var e=i.createElement("input");e.type="hidden",e.name="chart",e.value=o,t.appendChild(e),t.submit(),i.body.removeChild(t)}()};var l=t.getOptions().exporting;l&&(t.extend(l.menuItemDefinitions,{downloadCSV:{textKey:"downloadCSV",onclick:function(){this.downloadCSV()}},downloadXLS:{textKey:"downloadXLS",onclick:function(){this.downloadXLS()}},viewData:{textKey:"viewData",onclick:function(){this.viewData()}},openInCloud:{textKey:"openInCloud",onclick:function(){this.openInCloud()}}}),l.buttons.contextButton.menuItems.push("separator","downloadCSV","downloadXLS","viewData","openInCloud")),r.map&&(r.map.prototype.exportKey="name"),r.mapbubble&&(r.mapbubble.prototype.exportKey="name"),r.treemap&&(r.treemap.prototype.exportKey="name")}(t)});